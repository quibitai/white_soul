voice:
  voice_id: "ELEVEN_VOICE_ID"
  model_id: "eleven_multilingual_v2"  # v2 for cloned voice compatibility
  settings:
    stability: 0.65         # ↑ Higher stability for seamless chunk consistency
    similarity_boost: 0.85  # ↑ Maximum voice consistency for chunk stitching
    style: 0.22            # ↓ Reduced variation to prevent chunk-to-chunk differences
    speaker_boost: true     # Enhances clarity and presence
    speed: 0.94            # Optimal natural pace
    quality: "enhanced"     # V2 optimization for professional output
  seed: 123456            # Deterministic generation for consistency

pacing:
  wpm: 142               # Compensate for speed increase while maintaining natural flow
  pauses:
    # Optimized break system for seamless chunk transitions
    micro: 300            # 0.3s - subtle hesitation
    beat: 600             # 0.6s - natural rhythm
    pause: 1000           # 1.0s - comfortable break
    shift: 1600           # 1.6s - topic transition
    boundary: 1200        # ↑ 1.2s - NEW: chunk boundary masking pause
    # Removed: impact and major - too long per ElevenLabs best practices
  reflective_rate_delta_pct: -2  # Less dramatic pacing adjustment for natural flow

tone:
  allow: ["kinda","literally","ugh","you know","I mean","so yeah","still","weird"]
  ban:
    - "nervous system"
    - "somatic"
    - "inner child"
    - "self-surveillance"
    - "I invite you to"
    - "deep breath in"
    - "don't react"
  patterns:
    - pattern: "^No\\.$"
      suggest: "Nope."        # 'No.' can be read as 'Number'
    - pattern: "\\.\\.\\.\\s*(you guys|you all)"
      suggest: ", $1"         # ellipsis before 'you guys' causes odd stress

group_address:
  min_ratio: 0.30
  max_ratio: 0.50
  max_consecutive: 2



chunking:
  target_seconds: 35          # ↑ Longer chunks = fewer boundaries = less clipping
  max_chars: 3200             # ↑ Substantial chunks for seamless audio flow
  min_chars: 1500             # ↑ Ensure meaningful content per chunk
  guardrails:
    start_with_micro_pause: true   # Natural chunk transitions
    end_with_natural_pause: true   # ↑ Longer pauses to mask chunk boundaries
    force_sentence_completion: true # ↑ Never split mid-sentence
    add_boundary_breath: true      # ↑ Add breath marks at chunk ends

punctuation:
  # WST2 Studio Speech Rules - Punctuation + Space Logic
  avoid_trailing_em_dash: false  # Em-dashes allowed for sudden shifts, interrupted thoughts
  avoid_ellipsis_line_start: true
  drop_final_period_when_pause_follows: true  # to avoid end-of-line lift
  
  # WST2 Specific Rules
  ellipses_with_breaks: true      # Ellipses nearly always paired with <break time="1s" /> or longer
  em_dash_for_shifts: true        # Em-dashes for sudden shifts, interrupted thoughts, rhetorical emphasis
  no_space_before_punctuation: true  # No extra space before punctuation
  break_after_punctuation: true   # <break> tags go directly after punctuation
  one_space_before_inline_break: true  # One space before <break> tag when used inline

pronunciation:
  max_dictionaries: 3       # maximum pronunciation dictionaries to attach
  default_dictionaries: []    # no pronunciation dictionaries configured yet
  break_clamp_ms: 2200      # maximum break time in milliseconds

websocket:
  enable_ssml_parsing: true # enable SSML parsing for streaming
  avoid_tag_splitting: true # don't split SSML tags across frames
  
  # ElevenLabs streaming optimization
  chunk_length_schedule: [50, 120, 160, 290]  # Character thresholds for audio generation
  auto_mode: true                              # Automatic generation triggers
  optimize_streaming_latency: true             # Optimize for lower latency

# Model selection by use case for optimal performance
model_selection:
  proof: "eleven_flash_v2_5"      # Low latency for quick previews
  streaming: "eleven_turbo_v2_5"   # Balanced for real-time
  full: "eleven_multilingual_v2"  # v2 model for cloned voice compatibility
  long_form: "eleven_multilingual_v2"  # Consistent model for all use cases
  
# Sound effects generation settings
sound_effects:
  default_duration: 3              # Default duration in seconds
  prompt_influence: 0.3            # 0.0-1.0, creativity vs literal interpretation
  max_effects_per_chunk: 1         # Limit sound effects to avoid overwhelming

conversational_realism:
  you_guys_ratio: 0.22      # ↓ More professional tone for tarot readings
  verbal_hesitation_ratio: 0.25  # ↓ Cleaner delivery with fewer hesitations
  run_on_sentence_ratio: 0.18    # ↓ Clearer sentence structure
  all_caps_frequency: 0.10       # ↓ More controlled emphasis for professional delivery
  avoid_repetitive_negation: true # Reduce "it's not X, it's not Y" patterns
  mystical_vocabulary: true      # Ground overly mystical language in accessible terms

emphasis:
  use_ssml: true             # Enable SSML for v2 emotional delivery
  use_prosody: true          # Enable prosody tags for emotional variation
  use_emphasis_tags: true    # Enable emphasis tags for key insights
  caps_max_per_clause: 1
  caps_max_per_sentence: 2
  
  # Refined SSML emotional delivery - fewer triggers, more targeted effects
  emotional_patterns:
    # Natural pauses and breathing (reduced intensity)
    breaths: 
      ssml: '<break time="0.8s"/>'  # ↓ Shorter pause for more natural flow
      triggers: ["pause", "breath", "think", "reflect", "deep"]  # ↓ Reduced trigger list
    
    # Mystical content (more subtle prosody)
    mystery:
      ssml: '<prosody rate="0.95" pitch="-1st">{text}</prosody>'  # ↓ More subtle adjustments
      triggers: ["tarot", "divine", "mystic", "sacred", "arcana"]  # ↓ Core mystical terms only
    
    # Intimate delivery (refined)
    whispers:
      ssml: '<prosody volume="soft" rate="0.9">{text}</prosody>'  # ↑ Less dramatic rate change
      triggers: ["secret", "intimate", "whisper"]  # ↓ Focused triggers only
    
    # Key insights (unchanged - works well)
    emphasis:
      ssml: '<emphasis level="moderate">{text}</emphasis>'
      triggers: ["important", "key", "essential", "remember"]  # ↓ Core emphasis words
    
    # Energetic content (more controlled)
    excitement:
      ssml: '<prosody rate="1.05" pitch="+0.5st">{text}</prosody>'  # ↓ More subtle energy boost
      triggers: ["powerful", "transformation", "breakthrough"]  # ↓ Key energy words only

speech_patterns:
  hesitation_cues:
    - "yeah"
    - "like"
    - "so yeah"
    - "it's like"
    - "I mean"
  
  emphasis_words:
    # Refined emphasis list - focus on truly impactful words for professional delivery
    # Core energy concepts
    - "power"
    - "truth" 
    - "clarity"
    - "transformation"
    - "breakthrough"
    # Key insight markers
    - "essential"
    - "crucial"
    - "exactly"
    # Confirmation words
    - "absolutely"
    - "totally"
    # Removed: casual words like "yikes", "much", "literally" for more professional tone
  
  mystical_replacements:
    # Inverted: Replace mystical terms with grounded language
    "deep currents": "deep connection"
    "this portal": "this moment" 
    "transmission": "major change"
    "revelation": "sudden insight"
    # Ground mystical language in more accessible terms
    "clarity": "true understanding"
