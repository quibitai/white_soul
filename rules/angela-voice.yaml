voice:
  voice_id: "ELEVEN_VOICE_ID"
  model_id: "eleven_v3"  # v3 for advanced emotional delivery and audio tags
  settings:
    stability: 0.0          # Creative mode (0.0) for maximum emotional expressiveness
    similarity_boost: 0.85  # Higher for better voice consistency in v3
    style: 0.0             # Not used in v3 - stability controls behavior instead
    speaker_boost: true     # Enhances clarity and presence
    speed: 0.85            # Slower, more contemplative pace for mystical content
    quality: "enhanced"     # Enhanced quality for professional output
  seed: 123456            # Deterministic generation for consistency
  stability_mode: "creative"  # v3 stability mode: creative/natural/robust

pacing:
  wpm: 135               # Reduced from 145 for more contemplative delivery
  pauses:
    # WST2 Studio Speech Rules - Break Tag System - Enhanced for natural pacing
    micro: 400            # 0.4s - very slight hesitation or hard emphasis cutoff (was 0.3s)
    beat: 700             # 0.7s - micro-beat for rhythmic control or emphasis (was 0.5s)
    minor: 1200           # 1.2s - minor beat; after punchlines, pivots, or slight reflection (was 1.0s)
    shift: 1800           # 1.8s - emotional shift, impact line landing, paragraph break (was 1.5s)
    impact: 2300          # 2.3s - emotional shift, impact line landing, paragraph break (was 2.0s)
    major: 3500           # 3.5s - major mood shift, breath reset, scene change, or emotional floor drop (was 3.0s)
  reflective_rate_delta_pct: -3  # Slightly more reflective pacing adjustment

tone:
  allow: ["kinda","literally","ugh","you know","I mean","so yeah","still","weird"]
  ban:
    - "nervous system"
    - "somatic"
    - "inner child"
    - "self-surveillance"
    - "I invite you to"
    - "deep breath in"
    - "don't react"
  patterns:
    - pattern: "^No\\.$"
      suggest: "Nope."        # 'No.' can be read as 'Number'
    - pattern: "\\.\\.\\.\\s*(you guys|you all)"
      suggest: ", $1"         # ellipsis before 'you guys' causes odd stress

group_address:
  min_ratio: 0.30
  max_ratio: 0.50
  max_consecutive: 2

emphasis:
  use_ssml: false            # disabled by default for model compatibility
  use_prosody: false         # disabled by default - only breaks allowed
  use_emphasis_tags: false   # disabled by default for stability
  caps_max_per_clause: 1
  caps_max_per_sentence: 2

chunking:
  target_seconds: 25          # Slightly shorter for better pacing control (was 30)
  max_chars: 2200             # Reduced slightly for more natural breaks (was 2500)
  min_chars: 900              # Increased minimum for substantial chunks (was 800)
  guardrails:
    start_with_micro_pause: true   # Re-enabled for natural chunk transitions
    end_with_short_pause: true     # Re-enabled for breathing room between chunks

punctuation:
  # WST2 Studio Speech Rules - Punctuation + Space Logic
  avoid_trailing_em_dash: false  # Em-dashes allowed for sudden shifts, interrupted thoughts
  avoid_ellipsis_line_start: true
  drop_final_period_when_pause_follows: true  # to avoid end-of-line lift
  
  # WST2 Specific Rules
  ellipses_with_breaks: true      # Ellipses nearly always paired with <break time="1s" /> or longer
  em_dash_for_shifts: true        # Em-dashes for sudden shifts, interrupted thoughts, rhetorical emphasis
  no_space_before_punctuation: true  # No extra space before punctuation
  break_after_punctuation: true   # <break> tags go directly after punctuation
  one_space_before_inline_break: true  # One space before <break> tag when used inline

pronunciation:
  max_dictionaries: 3       # maximum pronunciation dictionaries to attach
  default_dictionaries:    # always attach these if available
    - "tarot-terms"
    - "angela-custom"
  break_clamp_ms: 2200      # maximum break time in milliseconds

websocket:
  enable_ssml_parsing: true # enable SSML parsing for streaming
  avoid_tag_splitting: true # don't split SSML tags across frames
  
  # ElevenLabs streaming optimization
  chunk_length_schedule: [50, 120, 160, 290]  # Character thresholds for audio generation
  auto_mode: true                              # Automatic generation triggers
  optimize_streaming_latency: true             # Optimize for lower latency

# Model selection by use case for optimal performance
model_selection:
  proof: "eleven_flash_v2_5"      # Low latency for quick previews
  streaming: "eleven_turbo_v2_5"   # Balanced for real-time
  full: "eleven_v3"               # v3 model for audio tags and emotional delivery
  long_form: "eleven_turbo_v2_5"  # More efficient for 3+ minute content
  
# Sound effects generation settings
sound_effects:
  default_duration: 3              # Default duration in seconds
  prompt_influence: 0.3            # 0.0-1.0, creativity vs literal interpretation
  max_effects_per_chunk: 1         # Limit sound effects to avoid overwhelming

conversational_realism:
  you_guys_ratio: 0.35      # 35% of "you" should be "you guys"
  verbal_hesitation_ratio: 0.35  # 35% of breaks replaced with verbal cues (increased for more natural flow)
  run_on_sentence_ratio: 0.20    # 20% less sentence combining for clearer pacing (was 30%)
  all_caps_frequency: 0.12       # 12% slightly reduced emphasis for calmer delivery (was 15%)
  avoid_repetitive_negation: true # Reduce "it's not X, it's not Y" patterns
  mystical_vocabulary: true      # Ground overly mystical language in accessible terms

audio_tags:
  enable_emotional_tags: true    # Enable ElevenLabs v3 audio tags for emotional delivery
  enable_sound_effects: false    # Simplified for v3 - focus on emotional expression first
  tag_strategy: "contextual"     # Strategic placement based on content, not probability
  max_tags_per_chunk: 2         # Conservative limit for natural flow
  
  # v3-optimized emotional delivery tags (verified ElevenLabs V3 compatibility)
  emotional_tags:
    # Natural vocal expressions & breathing
    breaths: ["[sighs]", "[exhales]", "[inhales]", "[breathes deeply]", "[coughs]"]  # Natural vocal breaks and pauses
    
    # Emotional expressions
    joy: ["[chuckles]", "[happy]"]                    # Light laughter and joy
    sadness: ["[sad]"]                                # Melancholy delivery
    excitement: ["[excited]", "[amazed]"]             # Energy surges in readings
    concern: ["[concerned]", "[worried]"]             # Gentle worry, empathetic care
    knowing: ["[thoughtful]", "[confident]"]          # Deep inner wisdom, trust
    
    # Mystical & spiritual energy
    mystery: ["[mysterious]", "[mystical]"]           # Angela's mystical presence  
    curiosity: ["[curious]", "[intrigued]"]           # Perfect for card exploration
    mischievous: ["[mischievously]"]                  # Playful, knowing energy
    
    # Delivery styles
    whispers: ["[whispers]"]                          # Soft, intimate delivery
    emphasis: ["[emphasizes]", "[slowly]"]            # For key insights and deliberate pacing
    
  # v3-compatible sound effects (minimal, strategic use)
  ambient_effects:
    mystical: ["[soft wind]", "[gentle chimes]"]      # Subtle atmosphere only
  
  # Context-aware triggers for natural placement (updated for V3 compatibility)
  placement_triggers:
    breaths: ["pause", "wait", "moment", "breath", "think", "reflect", "consider", "deep", "silence", "quiet", "still", "slowly", "gently"]
    joy: ["wonderful", "amazing", "beautiful", "love", "celebration", "victory", "success", "breakthrough", "joy", "happiness", "delight", "pleasure"]
    sadness: ["loss", "grief", "sorrow", "difficult", "hard", "painful", "hurt", "broken", "tears", "sadness", "melancholy", "heavy heart"]
    excitement: ["amazing", "incredible", "powerful", "energy", "transformation", "freedom", "liberation", "breakthrough", "shift", "change", "unleashed", "release", "boundaries", "limits", "break free"]
    concern: ["heavy", "weight", "burden", "carrying", "load", "pressure", "stress", "overwhelmed", "too much", "difficult", "struggle", "tired", "exhausted", "worn down"]
    knowing: ["trust", "instinct", "gut feeling", "inner voice", "already know", "deep down", "soul", "heart", "intuitive", "feel", "sense", "just know", "obvious", "truth", "authentic", "real", "genuine"]
    mystery: ["mysterious", "reveal", "unveil", "tarot", "divine", "spiritual", "high priestess", "priestess", "mystic", "ancient", "sacred", "intuition", "inner knowing", "cosmic", "universal", "wisdom", "arcana", "cards", "reading", "oracle", "veil", "behind", "beneath"]
    curiosity: ["wonder", "curious", "explore", "discover", "card", "insight", "clarity", "vision", "see", "truth", "know", "understand", "realize", "clear", "sight", "awareness", "perception"]
    mischievous: ["playful", "sneaky", "clever", "twist", "surprise", "plot", "scheme", "trick", "game", "secret plan", "wink", "hint", "tease", "jest", "smirk"]
    whispers: ["secret", "private", "intimate", "personal", "quiet", "soft", "gentle", "tender", "close", "whisper", "between us"]
    emphasis: ["important", "key", "crucial", "vital", "essential", "remember", "listen", "pay attention", "focus", "understand this", "here's the thing"]

speech_patterns:
  hesitation_cues:
    - "yeah"
    - "like"
    - "so yeah"
    - "it's like"
    - "I mean"
  
  emphasis_words:
    # WST2 Studio Speech Rules - ALL CAPS Emphasis
    # Used sparingly on emotionally loaded or rhythmically sharp words
    # For: internal voice surges, sarcastic emphasis, exasperation, spiraling, reactivity
    - "much"
    - "fully" 
    - "disappear"
    - "yikes"
    - "everything"
    - "power"
    - "energy"
    - "truth"
    - "clarity"
    - "space"
    - "move"
    - "feel"
    - "see"
    - "know"
    - "trust"
    - "really"
    - "totally"
    - "literally"
    - "actually"
    - "exactly"
  
  mystical_replacements:
    # Inverted: Replace mystical terms with grounded language
    "deep currents": "deep connection"
    "this portal": "this moment" 
    "transmission": "major change"
    "revelation": "sudden insight"
    # Ground mystical language in more accessible terms
    "clarity": "true understanding"
