voice:
  voice_id: "ELEVEN_VOICE_ID"
  model_id: "eleven_multilingual_v2"
  settings:
    stability: 0.5          # Optimized from 0.35 to ElevenLabs recommended 0.5
    similarity_boost: 0.80  # Keep current - good value
    style: 0.0             # Reduced from 0.20 for more natural delivery
    speaker_boost: true     # Keep current - enhances clarity
    speed: 1.0             # Added speed control (0.7-1.2 range)
    quality: "enhanced"     # Added quality parameter for better audio
  seed: 123456            # optional determinism

pacing:
  wpm: 145
  pauses:
    # WST2 Studio Speech Rules - Break Tag System
    micro: 300            # 0.3s - very slight hesitation or hard emphasis cutoff
    beat: 500             # 0.5s - micro-beat for rhythmic control or emphasis
    minor: 1000           # 1.0s - minor beat; after punchlines, pivots, or slight reflection
    shift: 1500           # 1.5s - emotional shift, impact line landing, paragraph break
    impact: 2000          # 2.0s - emotional shift, impact line landing, paragraph break
    major: 3000           # 3.0s - major mood shift, breath reset, scene change, or emotional floor drop
  reflective_rate_delta_pct: -2

tone:
  allow: ["kinda","literally","ugh","you know","I mean","so yeah","still","weird"]
  ban:
    - "nervous system"
    - "somatic"
    - "inner child"
    - "self-surveillance"
    - "I invite you to"
    - "deep breath in"
    - "don't react"
  patterns:
    - pattern: "^No\\.$"
      suggest: "Nope."        # 'No.' can be read as 'Number'
    - pattern: "\\.\\.\\.\\s*(you guys|you all)"
      suggest: ", $1"         # ellipsis before 'you guys' causes odd stress

group_address:
  min_ratio: 0.30
  max_ratio: 0.50
  max_consecutive: 2

emphasis:
  use_ssml: false            # disabled by default for model compatibility
  use_prosody: false         # disabled by default - only breaks allowed
  use_emphasis_tags: false   # disabled by default for stability
  caps_max_per_clause: 1
  caps_max_per_sentence: 2

chunking:
  target_seconds: 25
  max_chars: 1800
  guardrails:
    start_with_micro_pause: true
    end_with_short_pause: true

punctuation:
  # WST2 Studio Speech Rules - Punctuation + Space Logic
  avoid_trailing_em_dash: false  # Em-dashes allowed for sudden shifts, interrupted thoughts
  avoid_ellipsis_line_start: true
  drop_final_period_when_pause_follows: true  # to avoid end-of-line lift
  
  # WST2 Specific Rules
  ellipses_with_breaks: true      # Ellipses nearly always paired with <break time="1s" /> or longer
  em_dash_for_shifts: true        # Em-dashes for sudden shifts, interrupted thoughts, rhetorical emphasis
  no_space_before_punctuation: true  # No extra space before punctuation
  break_after_punctuation: true   # <break> tags go directly after punctuation
  one_space_before_inline_break: true  # One space before <break> tag when used inline

pronunciation:
  max_dictionaries: 3       # maximum pronunciation dictionaries to attach
  default_dictionaries:    # always attach these if available
    - "tarot-terms"
    - "angela-custom"
  break_clamp_ms: 2200      # maximum break time in milliseconds

websocket:
  enable_ssml_parsing: true # enable SSML parsing for streaming
  avoid_tag_splitting: true # don't split SSML tags across frames
  
  # ElevenLabs streaming optimization
  chunk_length_schedule: [50, 120, 160, 290]  # Character thresholds for audio generation
  auto_mode: true                              # Automatic generation triggers
  optimize_streaming_latency: true             # Optimize for lower latency

# Model selection by use case for optimal performance
model_selection:
  proof: "eleven_flash_v2_5"      # Low latency for quick previews
  streaming: "eleven_turbo_v2_5"   # Balanced for real-time
  full: "eleven_multilingual_v2"   # High quality for final output
  
# Sound effects generation settings
sound_effects:
  default_duration: 3              # Default duration in seconds
  prompt_influence: 0.3            # 0.0-1.0, creativity vs literal interpretation
  max_effects_per_chunk: 1         # Limit sound effects to avoid overwhelming

conversational_realism:
  you_guys_ratio: 0.35      # 35% of "you" should be "you guys"
  verbal_hesitation_ratio: 0.25  # 25% of breaks replaced with verbal cues
  run_on_sentence_ratio: 0.30    # 30% more sentence combining
  all_caps_frequency: 0.15       # 15% of key words should be ALL CAPS
  avoid_repetitive_negation: true # Reduce "it's not X, it's not Y" patterns
  mystical_vocabulary: true      # Ground overly mystical language in accessible terms

audio_tags:
  enable_emotional_tags: true    # Enable ElevenLabs audio tags for emotional delivery
  enable_sound_effects: true     # Enable sound effect tags
  tag_probability: 0.8           # 80% chance to add emotional tags (increased for testing)
  sound_effect_probability: 0.5  # 50% chance to add ambient sound effects (increased for testing)
  max_effects_per_chunk: 1       # Limit sound effects to avoid overwhelming
  
  # ElevenLabs v3 compatible audio tags
  emotional_tags:
    laughter: ["[laughs]", "[giggles]", "[chuckles]"]
    whisper: ["[whispers]"]
    breaths: ["[sighs]", "[exhales]", "[takes a breath]"]
    emotions: ["[curious]", "[excited]", "[thoughtful]", "[mysterious]"]
    emphasis: ["[emphasizes]", "[with conviction]"]
  
  # Mystical/Tarot-themed sound effects
  ambient_effects:
    mystical: ["[soft wind]", "[gentle chimes]", "[rustling cards]"]
    nature: ["[flowing water]", "[distant thunder]", "[night sounds]"]
    spiritual: ["[bell rings softly]", "[candle flickers]", "[crystal resonance]"]
  
  # Context triggers for automatic tag insertion
  emotional_triggers:
    laughter: ["funny", "amusing", "hilarious", "joke", "laugh"]
    whisper: ["secret", "quietly", "softly", "intimate", "personal", "hermit", "isolation", "solitude"]
    excitement: ["amazing", "incredible", "wow", "fantastic", "powerful", "energy", "transformation"]
    curiosity: ["wonder", "interesting", "curious", "explore", "discover", "card", "reading", "insight"]
    mystery: ["hidden", "mysterious", "unknown", "reveal", "unveil", "tarot", "cards", "divine", "spiritual"]

speech_patterns:
  hesitation_cues:
    - "yeah"
    - "like"
    - "so yeah"
    - "it's like"
    - "I mean"
  
  emphasis_words:
    # WST2 Studio Speech Rules - ALL CAPS Emphasis
    # Used sparingly on emotionally loaded or rhythmically sharp words
    # For: internal voice surges, sarcastic emphasis, exasperation, spiraling, reactivity
    - "much"
    - "fully" 
    - "disappear"
    - "yikes"
    - "everything"
    - "power"
    - "energy"
    - "truth"
    - "clarity"
    - "space"
    - "move"
    - "feel"
    - "see"
    - "know"
    - "trust"
    - "really"
    - "totally"
    - "literally"
    - "actually"
    - "exactly"
  
  mystical_replacements:
    # Inverted: Replace mystical terms with grounded language
    "deep currents": "deep connection"
    "this portal": "this moment" 
    "transmission": "major change"
    "revelation": "sudden insight"
    # Ground mystical language in more accessible terms
    "clarity": "true understanding"
